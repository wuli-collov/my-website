# Webpackæ„å»ºä¼˜åŒ–é¢è¯•è®²è§£

## æŠ€æœ¯ç‚¹å›¾è°±

æ¶‰åŠçš„æŠ€æœ¯ç‚¹å¦‚ä¸‹ï¼š

1. swc
2. thread-loader
3. webpack5 æŒä¹…åŒ–ç¼“å­˜æŠ€æœ¯
4. hash
5. terser-webpack-plugin

<img src="https://xiejie-typora.oss-cn-chengdu.aliyuncs.com/2024-06-18-025401.png" alt="image-20240618105400935" style="zoom:50%;" />

## éš¾ç‚¹æè¿°

æ¨¡æ‹Ÿé—®é¢˜ï¼šæˆ‘çœ‹åˆ°ä½ å†™äº†ä¸€ä¸ªé¡¹ç›®äº®ç‚¹ï¼Œæ˜¯ä¼˜åŒ– webpack æ„å»ºæ—¶é—´ï¼Œè¿™è¾¹å…³äº webpack çš„**æ‰“åŒ…æµç¨‹**ï¼Œä½ æœ‰äº†è§£è¿‡ä¹ˆï¼Ÿ

> **é—®é¢˜åˆ†æ**
>
> è¿™æ˜¯ä¸€ä¸ªåå‘å…«è‚¡æ–‡çš„é—®é¢˜ï¼š
>
> 1. æ‰“åŒ…æµç¨‹ä¸è¦å›ç­”é”™
> 2. ä¸æ–­çš„å¾€è‡ªå·±çš„é¡¹ç›®ä¸Šé¢å»é æ‹¢
>
> **å‚è€ƒç­”æ¡ˆ**
>
> ä½ å¥½ï¼Œè€å¸ˆï¼Œè¿™è¾¹å› ä¸ºæˆ‘è¦åš webpack çš„æ„å»ºä¼˜åŒ–ï¼Œæ‰€ä»¥é’ˆå¯¹ webpack çš„æ‰“åŒ…æµç¨‹æˆ‘æ˜¯æœ‰æ‰€äº†è§£çš„ã€‚webpack çš„æ‰“åŒ…æµç¨‹å¤§è‡´å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š
>
> 1. åˆå§‹åŒ–ï¼šwebpack é€šè¿‡é…ç½®æ–‡ä»¶å’Œ Shell å‚æ•°ï¼Œåˆå§‹åŒ–å‚æ•°ï¼Œç¡®å®šå…¥å£æ–‡ä»¶ã€è¾“å‡ºè·¯å¾„ã€åŠ è½½å™¨ã€æ’ä»¶ç­‰ä¿¡æ¯ã€‚æ¥ä¸‹æ¥è¯»å–é…ç½®æ–‡ä»¶ï¼Œå¹¶åˆå¹¶é»˜è®¤é…ç½®ã€CLI å‚æ•°ç­‰ï¼Œç”Ÿæˆæœ€ç»ˆçš„é…ç½®å¯¹è±¡ã€‚
> 2. ç¼–è¯‘ï¼šä»å…¥å£æ–‡ä»¶å¼€å§‹ï¼Œé€’å½’è§£ææ¨¡å—ä¾èµ–ï¼Œæ‰¾åˆ°æ‰€æœ‰éœ€è¦æ‰“åŒ…çš„æ¨¡å—ã€‚ä¹‹åä½¿ç”¨ loader å¯¹æ¯ä¸ªæ¨¡å—è¿›è¡Œè½¬æ¢ï¼Œè½¬æ¢æˆæµè§ˆå™¨èƒ½å¤Ÿè¯†åˆ«çš„ JS ä»£ç ã€‚
> 3. æ„å»ºæ¨¡å—ä¾èµ–å›¾ï¼šwebpack ä¼šä¸ºæ¯ä¸ªæ¨¡å—åˆ›å»ºä¸€ä¸ªæ¨¡å—å¯¹è±¡ï¼Œå¹¶æ ¹æ®æ¨¡å—çš„ä¾èµ–å…³ç³»ï¼Œç”Ÿæˆä¸€ä¸ªæ¨¡å—ä¾èµ–å›¾ï¼ˆDependency Graphï¼‰ã€‚
> 4. ç”Ÿæˆä»£ç å—ï¼ˆchunkï¼‰ï¼šæ ¹æ®å…¥å£å’Œä¾èµ–å›¾ï¼Œå°†æ‰€æœ‰æ¨¡å—åˆ†ç»„ï¼Œç”Ÿæˆä¸€ä¸ªä¸ªåŒ…å«å¤šä¸ªæ¨¡å—çš„ä»£ç å—ï¼ˆchunkï¼‰ï¼Œè¿™äº› chunk ä¼šæ ¹æ®é…ç½®ç”Ÿæˆä¸åŒçš„è¾“å‡ºæ–‡ä»¶ã€‚
> 5. è¾“å‡ºï¼šå°†ç”Ÿæˆçš„ä»£ç å—è¾“å‡ºåˆ°æŒ‡å®šçš„æ–‡ä»¶å¤¹ï¼Œå¹¶æ ¹æ®é…ç½®ç”Ÿæˆå¯¹åº”çš„é™æ€èµ„æºæ–‡ä»¶ã€‚
> 6. æ’ä»¶å¤„ç†ï¼šåœ¨æ•´ä¸ªæ„å»ºè¿‡ç¨‹ä¸­ï¼Œwebpack ä¼šåœ¨ç‰¹å®šçš„ç”Ÿå‘½å‘¨æœŸé’©å­ä¸Šæ‰§è¡Œæ’ä»¶ï¼Œæ’ä»¶å¯ä»¥å¯¹æ‰“åŒ…çš„å„ä¸ªé˜¶æ®µè¿›è¡Œå¹²é¢„å’Œå¤„ç†ã€‚
>
> **æ­£æ˜¯å› ä¸ºäº†è§£ webpack æ•´ä½“çš„æ‰“åŒ…æµç¨‹ï¼Œæ‰€ä»¥æˆ‘å‘ç°äº†å¾ˆå¤šå¯ä»¥ä¼˜åŒ–çš„åœ°æ–¹ï¼Œç„¶åè¿›ä¸€æ­¥ç€åŠ›äºæ„å»ºçš„ä¼˜åŒ–ï¼Œå¤§å¹…åº¦ç¼©å‡äº†æ„å»ºæ‰€èŠ±è´¹çš„æ—¶é—´ã€‚**ï¼ˆé’©å­ğŸªï¼‰

æ¨¡æ‹Ÿé—®é¢˜ï¼šæˆ‘çœ‹åˆ°ä½ å†™çš„æ„å»ºæ—¶é—´ä» 8min ç¼©å‡è‡³ 10s å†…ï¼Œé‚£ä¹ˆä½ èƒ½å…·ä½“è¯´ä¸€ä¸‹ä½ æ˜¯å¦‚ä½•åšçš„ä¹ˆï¼Ÿè¿˜æœ‰ä½ è¿™é‡Œæ‰€å†™çš„æ‰€ç¼©å‡çš„æ—¶é—´ï¼Œæ˜¯å…·ä½“æµ‹é‡äº†çš„ä¹ˆï¼Ÿé€šè¿‡ä»€ä¹ˆæ–¹å¼å»æµ‹é‡çš„ï¼Ÿ

>**é—®é¢˜åˆ†æ**
>
>1. ç®€å•ä»‹ç»ä¸€ä¸‹åšè¿™ä¸ªäº‹æƒ…çš„èƒŒæ™¯
>2. é€šè¿‡ä»€ä¹ˆå·¥å…·å»é‡åŒ–æ—¶é—´
>3. ä½ æ€è€ƒçš„æ–¹æ¡ˆä»¥åŠæœ€ç»ˆè½åœ°çš„æ–¹æ¡ˆ
>4. è½åœ°æ–¹æ¡ˆçš„ä¸€ä¸ªæ•´ä½“æ•ˆæœ
>
>**å‚è€ƒç­”æ¡ˆ**
>
>å¥½çš„ï¼Œé‚£æˆ‘æŠŠå…·ä½“å¦‚ä½•è¿›è¡Œä¼˜åŒ–çš„ï¼Œå±•å¼€æ¥è®²ä¸€ä¸‹ã€‚
>
>æˆ‘å…ˆè¯´ä¸€ä¸‹å½“æ—¶ä¸ºä»€ä¹ˆéœ€è¦åšè¿™ä¸ªäº‹å„¿å§ã€‚æˆ‘ä»¬é¡¹ç›®ä¸€å¼€å§‹å°±æ˜¯åŸºäº webpack æ­å»ºçš„ï¼Œéšç€åé¢é¡¹ç›®è¶Šæ¥è¶Šå¤§ï¼Œæ¨¡å—è¶Šæ¥è¶Šå¤šï¼Œæ„å»ºçš„æ—¶é—´ä¹Ÿè¶Šæ¥è¶Šå¤¸å¼ ã€‚æœ€å¼€å§‹è¿˜èƒ½å¤Ÿå¿å—ï¼Œæ—©ä¸Šåˆ°å…¬å¸å…ˆæŠŠé¡¹ç›®è·‘èµ·æ¥ï¼Œç­‰å®ƒæ„å»ºï¼Œç„¶åå¼€å§‹å°ç»„ä¼šè®®ï¼Œå°ç»„ä¼šè®®ç»“æŸåå›å»å·®ä¸å¤šé¡¹ç›®ä¹Ÿè·‘èµ·æ¥äº†ã€‚ä½†æ˜¯åé¢éšç€æ¨¡å—è¶Šæ¥è¶Šå¤šï¼Œä¼šéƒ½å¼€å®Œäº†å›å»é¡¹ç›®éƒ½è¿˜åœ¨æ„å»ºï¼Œäºæ˜¯æˆ‘ä»¬å°ç»„è®¨è®ºï¼Œè¿™ä¸ªé—®é¢˜å¿…é¡»å¾—è§£å†³äº†ï¼Œå› ä¸ºæ•´ä¸ªå›¢é˜Ÿé‡Œé¢ï¼Œå°±æˆ‘å¯¹å·¥ç¨‹åŒ–æœ‰ä¸€äº›ç ”ç©¶ï¼Œæ‰€ä»¥æŒ‡æ´¾æˆ‘æ¥å®Œæˆè¿™é¡¹ä»»åŠ¡ã€‚ï¼ˆç®€å•é˜è¿°åšè¿™ä¸ªäº‹æƒ…çš„èƒŒæ™¯ï¼‰
>
>æˆ‘å½“æ—¶é¦–å…ˆæƒ³åˆ°äº† Viteï¼Œå› ä¸º Vite å¯ä»¥ç›´æ¥è·³è¿‡æ‰“åŒ…çš„æ­¥éª¤ï¼Œä½†æ˜¯å› ä¸ºæˆ‘ä»¬è¿™ä¸ªé¡¹ç›®åŸºäº webpackï¼Œä½“é‡å¾ˆå¤§ï¼Œé‡Œé¢ç”¨åˆ°äº†å¾ˆå¤š webpack ç”Ÿæ€çš„æ’ä»¶å’Œ loaderï¼Œå†’ç„¶è¿ç§»åˆ° Vite å¯èƒ½ä¼šå¸¦æ¥ä¸€äº›æœªçŸ¥çš„é£é™©ï¼Œä¾‹å¦‚åœ¨ Vite ç”Ÿæ€ä¸­æ‰¾ä¸åˆ°å¯¹æ ‡çš„æ’ä»¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦åœ¨ Vite ä¸­é€šè¿‡è‡ªå®šä¹‰æ’ä»¶æ¥å®ç°é‚£ä¸ªæ’ä»¶çš„åŠŸèƒ½ï¼Œè¿™ä¸ªå·¥ä½œé‡æ˜¯ä¸å¯é¢„ä¼°çš„ã€‚ï¼ˆå¼ºè°ƒä½ æ˜¯å¦‚ä½•æ€è€ƒçš„ï¼‰
>
>æ‰€ä»¥ï¼Œæ—¢ç„¶æ— æ³•åˆ‡æ¢æ„å»ºå·¥å…·ï¼Œé‚£æ„å‘³ç€æ— æ³•è·³è¿‡æ‰“åŒ…è¿™ä¸ªè¿‡ç¨‹ï¼Œå› æ­¤æˆ‘éœ€è¦çŸ¥é“æ˜¯å“ªäº›åœ°æ–¹æ¶ˆè€—äº†é‚£ä¹ˆå¤šæ—¶é—´ã€‚åœ¨ webpack ä¸­æœ‰ä¸€ä¸ªæ’ä»¶ speed-measure-webpack-pluginï¼Œæˆ‘å°±æ˜¯é€šè¿‡è¿™ä¸ªæ’ä»¶å»æŸ¥çœ‹çš„æ„å»ºæ—¶é—´ï¼Œå®ƒä¼šå‡ºä¸€ä»½æŠ¥å‘Šï¼ŒåŒ…å«æ€»ä½“æ„å»ºæ—¶é—´ã€å„é˜¶æ®µçš„è€—æ—¶ã€æ’ä»¶è€—æ—¶ã€loader è€—æ—¶ï¼Œè¿™æ ·æˆ‘å°±èƒ½éå¸¸æ¸…æ¥šç©¶ç«Ÿæ˜¯å“ªäº›åœ°æ–¹è€—æ—¶ã€‚
>
>é€šè¿‡æ’ä»¶çš„åˆ†æç»“æœæ¥çœ‹ï¼Œæˆ‘å‘ç° Babel åœ¨ç¼–è¯‘ JS æ—¶ç‰¹åˆ«è€—æ—¶ï¼Œè¿˜æœ‰å°±æ˜¯ä¸€äº› loaderï¼Œæ¯”å¦‚å¤„ç† CSS çš„ css-loaderï¼Œåœ¨è§£æå’Œå¤„ç†è¿‡ç¨‹ä¸­ä¹ŸæŒºè€—æ—¶çš„ã€‚å› æ­¤æˆ‘è€ƒè™‘çš„ä¸»è¦ä¼˜åŒ–æ–¹æ¡ˆæœ‰ï¼š
>
>1. ç”¨ swc æ›¿æ¢ babel è¿›è¡Œç¼–è¯‘å·¥ä½œ
>2. thread-loader è§£å†³ loader è§£æè€—æ—¶é—®é¢˜
>
>ï¼ˆä½ æ€è€ƒå‡ºæ¥çš„æ–¹æ¡ˆæ˜¯ä»€ä¹ˆï¼‰
>
>å¦å¤–è¿˜é…åˆäº†ä¸€äº›**é¢å¤–çš„ä¼˜åŒ–æ‰‹æ®µ**ã€‚ï¼ˆé’©å­ğŸªï¼‰æœ€ç»ˆè½åœ°çš„æ–¹æ¡ˆæ•ˆæœéå¸¸å¥½ï¼Œå†æ¬¡ç”¨ speed-measure-webpack-plugin æ’ä»¶è¿›è¡Œæ„å»ºæ—¶é—´åˆ†æï¼ŒåŸºæœ¬ä¸Šæ„å»ºæ—¶é—´åœ¨ 10 å¤šç§’å·¦å³ã€‚ï¼ˆè½åœ°æ–¹æ¡ˆçš„ä¸€ä¸ªæ•´ä½“æ•ˆæœï¼‰
>
>**å°±çœ‹è€å¸ˆæ‚¨æ˜¯å¦éœ€è¦æˆ‘æŠŠè¿™äº›ä¼˜åŒ–æ‰‹æ®µå±•å¼€æ¥è¯´ä¸€ä¸‹ä¸ï¼Ÿ**ï¼ˆé’©å­ğŸªï¼‰

## æŠ€æœ¯ç‚¹å™è¿°

### 1. swc

æ¨¡æ‹Ÿé—®é¢˜ï¼šä½ è¯´ä½ ç”¨åˆ°äº† swcï¼Œé‚£ä¹ˆå°±å…ˆè®²ä¸€è®²è¿™ä¸ªå§ï¼Œä»€ä¹ˆæ˜¯ swcï¼Œå®ƒçš„ä¼˜åŠ¿æœ‰ä»€ä¹ˆï¼Ÿä½ ä¸ºä»€ä¹ˆç”¨å®ƒæ¥æ›¿æ¢ babel ï¼Ÿ

>**é—®é¢˜åˆ†æ**
>
>1. ç®€å•ä»‹ç»ä»€ä¹ˆæ˜¯ swc
>2. ç»“åˆä½ çš„é¡¹ç›®è¯´ä¸€ä¸‹ä¼˜åŒ–å‰åçš„åŒºåˆ«
>3. æ”¾ä¸‹ä¸€ä¸ªé’©å­
>
>**å‚è€ƒç­”æ¡ˆ**
>
>swc æ˜¯ä¸€ä¸ªç”¨ rust å†™çš„ JS/TS ç¼–è¯‘å™¨ï¼Œå› ä¸ºåŸºäº rustï¼Œæ‰€ä»¥ç¼–è¯‘é€Ÿåº¦éå¸¸å¿«ï¼Œè€Œä¸” swc èƒ½å¤Ÿå…¼å®¹å¤§å¤šæ•° babel æ’ä»¶å’Œé…ç½®ï¼Œå› æ­¤è¿ç§»èµ·æ¥æ²¡æœ‰å¤ªé«˜çš„æˆæœ¬ã€‚ï¼ˆåšä¸€ä¸ªç®€å•çš„ä»‹ç»ï¼‰
>
>åšå¼€å§‹åšä¼˜åŒ–ä¹‹å‰ï¼Œæˆ‘ä»¬é¡¹ç›®çš„æ„å»ºæ—¶é—´å·®ä¸å¤šè¦èŠ±è´¹ 8ï½10åˆ†é’Ÿå·¦å³ï¼Œæ›¿æ¢ä¸º swc ç¼–è¯‘åï¼Œæ„å»ºæ—¶é—´å‡å°‘åˆ°äº†çº¦ 3 åˆ†é’Ÿå·¦å³ã€‚ï¼ˆä¼˜åŒ–å‰åçš„åŒºåˆ«ï¼‰
>
>**æ‰€ä»¥æ•´ä¸ªä¼˜åŒ–æ–¹æ¡ˆä¸­ swc æ˜¯æœ€é‡è¦ï¼Œå å¤§å¤´çš„ã€‚è€Œ loader è§£æè€—æ—¶çš„é—®é¢˜ï¼Œæˆ‘æ˜¯é€šè¿‡ thread-loader æ¥è§£å†³çš„ï¼Œthread-loader ä¸çŸ¥é“é¢è¯•è€å¸ˆæ‚¨ä¹‹å‰äº†è§£è¿‡ä¹ˆï¼Ÿ**ï¼ˆé’©å­ğŸªï¼‰

### 2. thread-loader

æ¨¡æ‹Ÿé—®é¢˜ï¼šä½ è¿™è¾¹è¯´ä¸€ä¸‹å‘¢ï¼Ÿå®ƒæ˜¯å¦‚ä½•è§£å†³ loader è§£æè€—æ—¶é—®é¢˜çš„ï¼Ÿ

>**é—®é¢˜åˆ†æ**
>
>1. ä»‹ç»ä¸€ä¸‹ thread-loader
>2. ç»“åˆä½ çš„é¡¹ç›®ï¼Œç”¨äº†åçš„æ•ˆæœ
>3. æŠ›å‡ºä¸‹ä¸€ä¸ªé’©å­
>
>**å‚è€ƒç­”æ¡ˆ**
>
>thread-loader å¯ä»¥é€šè¿‡å¤šçº¿ç¨‹å¹¶è¡Œå¤„ç† loader æ“ä½œï¼Œè¿™æ ·å°±å‡å°‘äº†ä¸»çº¿ç¨‹çš„è´Ÿè½½ã€‚ï¼ˆç®€å•ä»‹ç»ï¼‰
>
>å½“æˆ‘ä»¬ç”¨äº† thread-loader ä»¥åï¼Œå¤„ç†å›¾ç‰‡ã€CSS ç›¸å…³ loader çš„è€—æ—¶é—®é¢˜ä¹Ÿå°±è§£å†³äº†ï¼Œæ„å»ºæ—¶é—´è¿›ä¸€æ­¥ç¼©å‡åˆ°äº† 2 åˆ†é’Ÿã€‚ï¼ˆä½¿ç”¨åæ•ˆæœï¼‰
>
>æ‰€ä»¥ swc å’Œ  thread-loader æ˜¯æ•´ä¸ªä¼˜åŒ–æ–¹æ¡ˆä¸­æœ€æ ¸å¿ƒçš„æ‰‹æ®µï¼Œ**å‰©ä¸‹ä¸€äº›å…¶ä»–çš„ä¼˜åŒ–æ‰‹æ®µï¼Œå€’ä¸æ˜¯è¯´æ²¡ç”¨ï¼Œä½†ä¸»è¦æ˜¯èµ·åˆ°ä¸€ä¸ªé”¦ä¸Šæ·»èŠ±çš„ä½œç”¨ï¼Œä¸€æ­¥ä¸€æ­¥å°† 2 åˆ†é’Ÿçš„æ„å»ºæ—¶é—´ç»§ç»­ä¼˜åŒ–åˆ° 10s ä»¥å†…ã€‚å°±çœ‹è€å¸ˆæ‚¨è¿™è¾¹éœ€è¦æˆ‘ä»‹ç»é¢å¤–çš„é‚£äº›ä¼˜åŒ–æ‰‹æ®µä¸ï¼Ÿ**

### 3. æŒä¹…åŒ–ç¼“å­˜å’Œ hash

æ¨¡æ‹Ÿé—®é¢˜ï¼šå¯ä»¥ï¼Œä½ å°±æŒ¨ç€æŒ¨ç€è®²å§ï¼Ÿè®²ä¸€ä¸‹ä½ å‰©ä¸‹çš„é‚£äº›ä¼˜åŒ–æ‰‹æ®µï¼Œæ˜¯å¦‚ä½•å°†ç›®å‰çš„ 2 åˆ†é’Ÿä¼˜åŒ–åˆ°æœ€å 10s ä»¥å†…çš„ï¼Ÿ

>**é—®é¢˜åˆ†æ**
>
>ä»‹ç»å‰©ä½™çš„ä¼˜åŒ–æ‰‹æ®µå³å¯ã€‚è¿™é‡Œå…ˆè¯´ä¸¤ä¸ªï¼Œçœ‹ä¸€ä¸‹é¢è¯•å®˜çš„åé¦ˆã€‚
>
>**å‚è€ƒç­”æ¡ˆ**
>
>å½“æ—¶æˆ‘ä»¬çš„é¡¹ç›®ï¼Œä½¿ç”¨çš„ webpack ç‰ˆæœ¬æ˜¯ webpack5ï¼Œæ‰€ä»¥æˆ‘æƒ³åˆ°äº†å¯ä»¥åˆ©ç”¨ webpack5 çš„æŒä¹…åŒ–ç¼“å­˜æŠ€æœ¯ï¼Œæ¥è¿›ä¸€æ­¥å‹ç¼©æ„å»ºçš„æ—¶é—´ã€‚webpack5 æ–°æä¾›çš„æŒä¹…åŒ–ç¼“å­˜æŠ€æœ¯ï¼Œèƒ½å¤ŸæŠŠæ¨¡å—çš„ç¼–è¯‘ç»“æœã€è§£æç»“æœä»¥åŠæ’ä»¶çš„æ‰§è¡Œç»“æœç¼“å­˜åˆ°å†…å­˜æˆ–è€…æ–‡ä»¶é‡Œé¢ï¼Œè¿™æ ·åç»­è¿›è¡Œæ„å»ºçš„æ—¶å€™å°±å¯ä»¥é‡ç”¨è¿™äº›ç¼“å­˜æ•°æ®ï¼Œå‡å°‘ä¸å¿…è¦çš„é‡å¤è®¡ç®—å’Œç¼–è¯‘ã€‚
>
>å½“ç„¶ï¼Œç¬¬ä¸€æ¬¡å¯åŠ¨é¡¹ç›®çš„æ—¶å€™ï¼Œæ—¶é—´ä¸Šé¢æ²¡æœ‰å¤ªå¤§å˜åŒ–ï¼Œå› ä¸ºç¼“å­˜è¿˜æ²¡æœ‰ç”Ÿæˆï¼Œä½†æ˜¯ä¹‹åç¼“å­˜éå¸¸æœ‰ç”¨ï¼Œç‰¹åˆ«å¼€å‘ç¯å¢ƒä¸‹éœ€è¦é¢‘ç¹æ„å»ºï¼Œå¦‚æœæ¯æ¬¡éƒ½æ˜¯æ„å»ºæ‰€æœ‰çš„æ–‡ä»¶ä¼šéå¸¸è€—æ—¶ï¼Œè€Œç¼“å­˜çš„å­˜åœ¨èƒ½è¿›ä¸€æ­¥ç¼©çŸ­æ„å»ºæ—¶é—´ï¼Œä» 2 åˆ†é’Ÿç¼©çŸ­åˆ°äº† 1 åˆ†é’Ÿã€‚
>
>åŠ ä¸Šäº†ç¼“å­˜åï¼Œå½“æ—¶æ„Ÿè§‰è¿™å¥—ä¼˜åŒ–æ–¹æ¡ˆå·²ç»æ˜¯æé™äº†ï¼Œå¹¶ä¸”æ•´ä¸ªå°ç»„çš„æˆå‘˜ä¹Ÿéå¸¸æ»¡æ„ï¼Œæ¯•ç«Ÿä¹‹å‰æ„å»ºéœ€è¦ç­‰å¾… 8 åˆ†é’Ÿï¼Œç°åœ¨åªéœ€è¦ 1 åˆ†é’Ÿå·¦å³ï¼Œå¤§å®¶æ„Ÿè§‰è¿™å·²ç»å¾ˆå¥½äº†ã€‚ï¼ˆè¯¥è¯æœ¯ä¸»è¦æ˜¯å¢åŠ ä¸€ä¸ªçœŸå®æ€§ï¼‰
>
>ä½†æ˜¯æˆ‘è¿™ä¸ªäººï¼Œåšäº‹æƒ…å–œæ¬¢å°½è‡ªå·±çš„èƒ½åŠ›ï¼Œå°½é‡åšåˆ°æœ€å¥½ï¼Œæ‰€ä»¥æˆ‘å°±åœ¨æƒ³è¿˜æœ‰æ²¡æœ‰èƒ½è¿›ä¸€æ­¥ä¼˜åŒ–çš„æ‰‹æ®µï¼Œé‚£æ®µæ—¶é—´åœ¨ç½‘ä¸Šæœç´¢ç›¸å…³çš„èµ„æ–™ï¼Œçœ‹äº†å¾ˆå¤šæŠ€æœ¯æ–‡ç« ï¼Œåæ¥å‘ç°åœ¨å¼€å‘ç¯å¢ƒä¸‹é€šè¿‡å»æ‰æ‰“åŒ… hash  èƒ½è¿›ä¸€æ­¥å‹ç¼©å¼€å‘ç¯å¢ƒä¸‹çš„æ„å»ºæ—¶é—´ã€‚ï¼ˆçªå‡ºä¸ªäººåšäº‹å„¿çš„é£æ ¼æˆ–è€…è¯´æ€åº¦ï¼‰
>
>å› ä¸ºåœ¨å¼€å‘ç¯å¢ƒä¸­ï¼Œä¸å¤ªéœ€è¦ hashï¼Œhash å®é™…ä¸Šæ˜¯ç”Ÿäº§ç¯å¢ƒä¸‹**åˆ©ç”¨æµè§ˆå™¨ç¼“å­˜æœºåˆ¶**ä¼˜åŒ–ç”¨æˆ·ä½“éªŒçš„ä¸€ç§æ‰‹æ®µã€‚å¼€å‘ç¯å¢ƒä¸‹ä¼šé¢‘ç¹çš„è¿›è¡Œä»£ç ä¿®æ”¹å’Œæ„å»ºï¼Œè€Œç”Ÿæˆ hash ä¼šæ¶‰åŠåˆ°é¢å¤–çš„è®¡ç®—å’Œæ–‡ä»¶å¤„ç†ï¼Œå¢åŠ ä¸å¿…è¦çš„æ„å»ºæ—¶é—´ã€‚
>
>å»é™¤ hash åï¼Œå¼€å‘ç¯å¢ƒä¸‹çš„æ„å»ºæ—¶é—´è¿›ä¸€æ­¥ä¼˜åŒ–åˆ° 40 ç§’ã€‚
>
>è¯´å®è¯ï¼Œä¸€å¼€å§‹æˆ‘å¯¹ hash å¹¶ä¸æ˜¯å¤ªåœ¨æ„çš„ï¼Œä½†æ˜¯å»æ‰ hash åï¼ŒçœŸçš„è¿˜è¿›ä¸€æ­¥å‹ç¼©äº†å¼€å‘ç¯å¢ƒä¸‹çš„æ„å»ºæ—¶é—´ï¼Œæˆ‘å‘ç°å¾ˆå¤šä¸œè¥¿æ— æ³•ä¸€æ¦‚è€Œè®ºï¼Œä¸åŒç±»å‹ã€è§„æ¨¡çš„é¡¹ç›®ï¼Œåœ¨ A é¡¹ç›®ä¸­æ¯«æ— é—®é¢˜çš„ä¸€äº›ä¸œè¥¿ï¼Œåœ¨ B é¡¹ç›®ä¸­å¯èƒ½å°±ä¼šå­˜åœ¨ä¸€äº›é—®é¢˜æˆ–è€…éšæ‚£ã€‚è¿™ä¹Ÿæ˜¯æˆ‘é€šè¿‡è¿™ä¸ªé¡¹ç›®æ‰€ç§¯ç´¯çš„ä¸€ä¸ªå®è´µç»éªŒã€‚ï¼ˆè¯¥è¯æœ¯ä»‹ç»ä½ åœ¨è¯¥é¡¹ç›®ä¸­æ²‰æ·€ä¸‹æ¥çš„ä¸€äº›ä¸œè¥¿ï¼Œå‡¸æ˜¾ä¸€ä¸ªçœŸå®æ€§ï¼‰
>
>**æœ€åä¸€ä¸ªä¼˜åŒ–æ‰‹æ®µå°±æ˜¯å‡çº§ä¸€äº›è€æ—§çš„æ’ä»¶ï¼Œå› ä¸ºä¸€äº›æ’ä»¶æ–°ç‰ˆæœ¬ç›¸è¾ƒäºæ—§ç‰ˆæœ¬ï¼Œä¼šä¿®å¤ä¸€äº› bugï¼Œåœ¨æ€§èƒ½ã€ç®—æ³•ä¸Šé¢å¯èƒ½ä¹Ÿä¼šæœ‰ä¸€äº›æå‡ã€‚**

### 4. æµè§ˆå™¨ç¼“å­˜æœºåˆ¶

æ¨¡æ‹Ÿé—®é¢˜ï¼šæˆ‘çœ‹ä½ åˆšæ‰æåˆ°äº†æµè§ˆå™¨ç¼“å­˜ï¼Œä½ æ¥å…·ä½“è¯´ä¸€ä¸‹å‘¢ï¼Ÿæµè§ˆå™¨ç¼“å­˜æœ‰å“ªäº›ç±»å‹ï¼Ÿä¸åŒçš„ç±»å‹æ˜¯åœ¨ä»€ä¹ˆæ—¶å€™å‘½ä¸­çš„ï¼Ÿ

>**é—®é¢˜åˆ†æ**
>
>1. æè¿°ä»€ä¹ˆæ˜¯æµè§ˆå™¨ç¼“å­˜
>2. ä»€ä¹ˆæ˜¯å¼ºç¼“å­˜ï¼Œä»€ä¹ˆæ˜¯å¼±ç¼“å­˜ï¼Œå„è‡ªçš„å‘½ä¸­æœºåˆ¶
>3. å†æ¬¡æŠ›å‡ºæ’ä»¶çš„é’©å­
>
>**å‚è€ƒç­”æ¡ˆ**
>
>æµè§ˆå™¨ç¼“å­˜æ˜¯æµè§ˆå™¨å†…éƒ¨çš„ä¸€ç§æœºåˆ¶ï¼Œç”¨äºç¼“å­˜ HTMLã€CSSã€JS ä»¥åŠå›¾ç‰‡ç­‰èµ„æºï¼Œè¿™æ ·å¯ä»¥å‡å°‘æœåŠ¡å™¨è´Ÿæ‹…ï¼ŒåŠ å¿«é¡µé¢åŠ è½½é€Ÿåº¦ã€‚æµè§ˆå™¨ç¼“å­˜ä¸»è¦åˆ†ä¸ºä¸¤ç§ç±»å‹ï¼šå¼ºç¼“å­˜å’Œå¼±ç¼“å­˜ã€‚
>
>- å¼ºç¼“å­˜ï¼šæ˜¯æŒ‡æµè§ˆå™¨åœ¨ä¸€å®šæ—¶é—´å†…ç›´æ¥ä»ç¼“å­˜ä¸­è¯»å–èµ„æºï¼Œè€Œä¸å‘èµ·è¯·æ±‚åˆ°æœåŠ¡å™¨ã€‚å³ä½¿ç”¨æˆ·åˆ·æ–°é¡µé¢ï¼Œæµè§ˆå™¨ä¹Ÿä¸ä¼šå‘æœåŠ¡å™¨è¯·æ±‚èµ„æºã€‚å¼ºç¼“å­˜ä¸»è¦é€šè¿‡ HTTP å“åº”å¤´ä¸­çš„ Expires å’Œ Cache-Control å­—æ®µæ¥æ§åˆ¶ã€‚
>- å¼±ç¼“å­˜ï¼šå¼±ç¼“å­˜åˆ™æ˜¯åœ¨å¼ºç¼“å­˜æ²¡æœ‰å‘½ä¸­æ—¶ï¼Œä¼šå»æ£€æŸ¥å¼±ç¼“å­˜ã€‚å¼±ç¼“å­˜ä¹Ÿè¢«ç§°ä¹‹ä¸ºåå•†ç¼“å­˜ï¼Œæµè§ˆå™¨åœ¨è¯·æ±‚èµ„æºæ—¶ï¼Œä¼šå…ˆå‘é€ä¸€ä¸ªè¯·æ±‚åˆ°æœåŠ¡å™¨ï¼Œè¯¢é—®èµ„æºæ˜¯å¦æœ‰æ›´æ–°ã€‚å¦‚æœèµ„æºæ²¡æœ‰æ›´æ–°ï¼ŒæœåŠ¡å™¨ä¼šè¿”å› 304 çŠ¶æ€ç ï¼Œå‘Šè¯‰æµè§ˆå™¨ç»§ç»­ä½¿ç”¨ç¼“å­˜ï¼Œè¿™å°±æ˜¯å‘½ä¸­äº†å¼±ç¼“å­˜ã€‚å¦‚æœèµ„æºæœ‰æ›´æ–°ï¼ŒæœåŠ¡å™¨åˆ™è¿”å›æ–°çš„èµ„æºå†…å®¹ã€‚å¼±ç¼“å­˜ä¸»è¦é€šè¿‡ HTTP å“åº”å¤´ä¸­çš„ Last-Modified å’Œ ETag å­—æ®µæ¥æ§åˆ¶ã€‚
>
>ä¸€èˆ¬å¯¹äºä¸ç»å¸¸å˜åŒ–çš„é™æ€èµ„æºï¼Œå¦‚ç½‘ç«™çš„å›¾ç‰‡ã€æ ·å¼è¡¨ã€JS åº“ç­‰ï¼Œé€šå¸¸ä¼šä½¿ç”¨å¼ºç¼“å­˜ï¼Œå¹¶è®¾ç½®è¾ƒé•¿çš„ç¼“å­˜æ—¶é—´ã€‚å¯¹äºç»å¸¸å˜åŒ–çš„åŠ¨æ€èµ„æºï¼Œå¦‚ API å“åº”ã€ç”¨æˆ·æ•°æ®ç­‰é€šå¸¸ä½¿ç”¨å¼±ç¼“å­˜ã€‚ï¼ˆä»‹ç»ä»€ä¹ˆæ˜¯æµè§ˆå™¨ç¼“å­˜ï¼‰
>
>æ‰€ä»¥ç”Ÿäº§ç¯å¢ƒä¸‹ä¸ºäº†å……åˆ†åˆ©ç”¨æµè§ˆå™¨ç¼“å­˜æœºåˆ¶ï¼Œä¸€èˆ¬ä¼šç”Ÿæˆ hash å€¼ï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿æ–‡ä»¶åå”¯ä¸€ï¼Œå½“æ–‡ä»¶å†…å®¹å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ–‡ä»¶åä¹Ÿä¼šå˜åŒ–ï¼Œä»è€Œå¼ºåˆ¶æµè§ˆå™¨åŠ è½½æ–°çš„èµ„æºã€‚ä½†æ˜¯å¼€å‘ç¯å¢ƒä¸‹ä¸éœ€è¦ï¼Œå¼€å‘ç¯å¢ƒä¸‹ä»£ç é¢‘ç¹æ›´æ”¹ï¼Œç”Ÿæˆ hash åè€Œæµªè´¹æ—¶é—´ï¼Œç‰¹åˆ«æˆ‘ä»¬çš„é¡¹ç›®è§„æ¨¡åˆæ¯”è¾ƒå¤§ï¼Œå»æ‰ hash åæ„å»ºæ—¶é—´å±…ç„¶æœ‰ 20s å·¦å³çš„ä¼˜åŒ–ï¼Œä» 1min é™åˆ°äº† 40s å·¦å³ã€‚
>
>**æœ€åå‡çº§äº†ä¸€ä¸‹æ’ä»¶ï¼Œè¾¾åˆ°äº†æœ€ç»ˆçš„ 10s ä»¥å†…çš„æ•ˆæœã€‚**ï¼ˆé’©å­ğŸªï¼‰

### 5. terser-webpack-plugin

æ¨¡æ‹Ÿé—®é¢˜ï¼šé‚£ä½ è¯´ä¸€ä¸‹ä½ å‡çº§äº†ä»€ä¹ˆæ’ä»¶ï¼Ÿ

>**é—®é¢˜åˆ†æ**
>
>1. ç®€å•å›ç­”å‡çº§äº†ä»€ä¹ˆæ’ä»¶
>2. å¯¹æ•´å¥—è½åœ°æ–¹æ¡ˆè¿›è¡Œä¸€ä¸ªæ€»ç»“
>
>**å‚è€ƒç­”æ¡ˆ**
>
>å½“æ—¶å‡çº§äº†ä¸€ä¸ª terser-webpack-plugin çš„æ’ä»¶ï¼Œè¿™ä¸ªæ’ä»¶æ˜¯åšå‹ç¼©çš„ã€‚å› ä¸ºæ‰“åŒ…çš„æ—¶å€™æœ‰ä¸€ä¸ªé‡è¦çš„ä»»åŠ¡å°±æ˜¯è¦å‹ç¼©ï¼Œè€Œå‹ç¼©æ‰€èŠ±è´¹çš„æ—¶é—´ä¹ŸæŒºé•¿çš„ï¼Œæˆ‘å°±ç¢ç£¨ç€èƒ½ä¸èƒ½å‡å°‘ä¸€ä¸‹å‹ç¼©æ‰€èŠ±è´¹çš„æ—¶é—´ã€‚
>
>ä¸€å¼€å§‹æƒ³ç€äº†è§£ä¸€ä¸‹è¿™ä¸ªæ’ä»¶æ˜¯å¦‚ä½•å‹ç¼©çš„ï¼Œå‹ç¼©ç®—æ³•æ˜¯ä»€ä¹ˆã€‚ç»“æœåˆšå¥½çœ‹åˆ°äº†è¿™ä¸ªæ’ä»¶çš„ CHANGELOG æ–‡æ¡£ï¼Œå‘ç°ä» 5.2.0 ç‰ˆæœ¬å¼€å§‹å¼•å…¥äº† swc å‹ç¼©å™¨ï¼Œæˆ‘å°±ä¼°æ‘¸ç€æ€§èƒ½ä¸Šé¢èƒ½æœ‰å¤§å¹…çš„æå‡ï¼Œäºæ˜¯æˆ‘å°±å¯¹è¿™ä¸ªæ’ä»¶è¿›è¡Œäº†ç‰ˆæœ¬å‡çº§ï¼Œä¸å‡ºæ‰€æ–™ï¼Œå‹ç¼©çš„æ—¶é—´å†ä¸€æ¬¡å¾—åˆ°äº†ä¼˜åŒ–ï¼Œåˆ°äº†ç›®å‰çš„ 10s å·¦å³ã€‚
>
>ç°åœ¨å›æƒ³èµ·è¿™ä¸€æ•´å¥—æ„å»ºä¼˜åŒ–çš„è½åœ°æ–¹æ¡ˆï¼Œä»æœ€åˆçš„ 8min é™åˆ° 10s ä»¥å†…ï¼Œæˆ‘è¿˜æ˜¯æŒºæœ‰å¿ƒå¾—ä½“ä¼šçš„ã€‚ä¸€å¼€å§‹åªæƒ³ç€å¦‚ä½•åŠ å¿«æ„å»ºé€Ÿåº¦ï¼Œä½†æ€§èƒ½ä¼˜åŒ–å¾€å¾€æ˜¯å„ç§æ–¹é¢çš„ï¼Œé™ä½æ„å»ºæ—¶é—´æ˜¯ä¸€ä¸ªæ–¹é¢ï¼Œåˆç†çš„åˆ©ç”¨ç¼“å­˜ä¹Ÿæ˜¯ä¸€ç§æœ‰æ•ˆçš„æ‰‹æ®µï¼Œä½¿ç”¨å¤šçº¿ç¨‹æ¥è§„é¿è€—æ—¶ä»»åŠ¡é˜»å¡ä¸»çº¿ç¨‹ï¼Œä¹Ÿæ˜¯ä¸€ç§æ–¹æ¡ˆã€‚ï¼ˆé˜è¿°è‡ªå·±çš„å¿ƒå¾—ä½“ä¼šï¼Œä¹Ÿæ˜¯å¯¹æ•´ä¸ªæ–¹æ¡ˆåšä¸€ä¸ªæ€»ç»“ï¼‰
>
>æ€»ä¹‹è¿™å°±æ˜¯æˆ‘é’ˆå¯¹ webpack æ„å»ºä¼˜åŒ–æ²‰æ·€ä¸‹æ¥çš„ä¸€å¥—è½åœ°æ–¹æ¡ˆï¼Œä¸çŸ¥é“è€å¸ˆæ‚¨é‚£è¾¹è¿˜æœ‰ä»€ä¹ˆæ›´å¥½çš„æè®®ä¸ï¼Ÿ
>
>ï¼ˆç»“æŸğŸ‰ï¼‰

---

-EOF-
