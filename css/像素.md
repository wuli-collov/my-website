https://gitee.com/dev-edu/frontend-web-app/blob/master/02.%20%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%80%82%E9%85%8D/03.%20%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%80%82%E9%85%8D.md#3-%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%80%82%E9%85%8D
# 设备像素
代表的是设备上有多少个像素点
，也被称之为“物理像素”。这是最好理解的一个名词，对于一般的显示设备来说，一个像素对应着屏幕上的一个发光点，这个点能够发出红、绿、蓝三种颜色的光，通过混合不同的 RGB 值，为我们创造了一个像素的颜色。
因此设备像素就是指实际存在的像素。

平时我们在看一个设备屏幕的参数时，往往就有分辨率这么一个参数，例如 2340 × 1080，这代表什么含义呢？
    这表示在设备屏幕的水平方向上有 2340 个像素点，垂直方向上有 1080 个像素点

屏幕尺寸 6.67 英寸是指什么呢？
    首先英寸是一个长度单位，1 英寸（inch）等于 2.54 厘米（cm）。其次这里的 6.67 英寸指的是屏幕对角线的长度。
有了屏幕分辨率和屏幕尺寸的信息，我们就可以计算像素密度（PPI）。所谓像素密度，就是指 1 英寸下的设备像素数量，计算公式如下：
 ppi=dp/di=Math.sqrt(wp*wp+hp*hp)/di
 ```js
 这里我们可以简单的计算一下 iPhone6 Plus 的 ppi：

// 屏幕斜边的像素
const margin = Math.sqrt(Math.pow(1080,2)+Math.pow(1920,2));
console.log(margin); // 2202.9071700822983
console.log(margin/5.5); // 400.52857637859967 PPI
 ```
# CSS 像素（设备独立像素、逻辑像素）
上面我们已经介绍了 ppi 的概念，那么 ppi 越高，所包含的设备像素也就越多。
如果我的 CSS 像素和设备像素是 1:1 的关系的话，随着设备像素的提升，图像就会越来越小。
所以需要修改比例
以前在做 PC 端网页开发的时候，由于 CSS 像素始终和设备像素是 1:1 的关系（不考虑缩放），所以给大家了一种错觉，以为 CSS 像素和设备像素就是 1:1 的对应关系，但是实际上 CSS 像素确是一个抽象的单位，具体含有多少个设备像素不是一定的。

# 像素比（DPR）
算公式为：DPR = 设备像素 / CSS 像素。

举个例子，如果 CSS 像素和设备像素 1:1 关系，那么 DPR 值就为 1。如果 1 个 CSS 像素对应 2 个设备像素，那么 DPR 值就为 2。

可以通过 window.devicePixelRatio 获取一个设备的 DPR

# viewport 视口
视口，英语全称 *viewport*，指的是设备的屏幕上能用来显示我们的网页的那一块区域，再具体一点，就是浏览器上（也可能是一个 *app* 中的 *webview*）用来显示网页的那部分区域。

# 移动端适配
常见的适配方案很多，这里列举出常用的 5 种适配方案，分别是：

百分比适配
viewport 缩放适配
DPR 缩放适配
rem 适配
vw、vh 适配
## 百分比适配
在 CSS 中盒子的宽度可以设置为一个百分比值，表示根据父级宽度的百分比来计算宽度。因此我们可以通过百分比的方式让一个盒子在任何设备中宽度占比都是一样的。
## viewport 缩放适配
```js
(function(){
	//获取css像素（viewport没有缩放）
	var curWidth=document.documentElement.clientWidth;
	
	console.log(curWidth);

	var targetWidth=375;
	var scale=curWidth/targetWidth;
	console.log(scale);

	var view=document.getElementById('view');
	console.log(view.content);

	view.content='initial-scale='+scale+',user-scalable=no,minimum-scale='+scale+',maximum-scale='+scale+'';
})();
```
##  DPR 缩放适配
其原理就是将把 CSS 像素缩放成与设备像素一样大的尺寸。
```js
(function () {
    var meta = document.querySelector('meta[name="viewport"]');
    // window.devicePixelRatio 获取 DPR 的值
    // 以 iPhone 6/7/8 为例
    // 750px * 缩放值 = 375px => 缩放值 = 375px/750px => 缩放值 = 1/DPR
    var scale = 1 / window.devicePixelRatio;

    if (!meta) {
        //这个条件成立说明用户没有写meta标签，我需要创建一个
        meta = document.createElement('meta');
        meta.name = 'viewport';
        meta.content = 'width=device-width,initial-scale=' + scale + ',user-scalable=no,minimum-scale=' + scale + ',maximum-scale=' + scale + '';
        document.head.appendChild(meta);
    } else {
        meta.setAttribute('content', 'width=device-width,initial-scale=' + scale + ',user-scalable=no,minimum-scale=' + scale + ',maximum-scale=' + scale + '');
    }
})();
```
## rem 适配
rem 适配的原理，就是把所有的设备都分成相同的若干份，再计算元素宽度所占的份数

举个例子，iPhone5 和 iPhone6 对应的设备宽度分别为 320px 和 375px，现在我们将其分为 100 列，那么对应每一列为 3.2px 和 3.75px。看见没，不同的设备宽度，对应的每一列的宽度就不一样。之后我们再设置元素的宽度时，以列为媒介即可。

比如同样一个 div，我们设置它的宽度为 10 列，那么在 iPhone5 中该 div 的宽就是 32px，而在 iPhone6 中该 div 的宽度就是 37.5px。你看，通过这种方式是不是就实现了不同设备宽度的设备中，一个元素的大小可以等比例的缩放。

假设设计稿是按照 750px（iPhone 6/7/8 尺寸）设计的，我们测量出来的是 100px，那么换算成设备像素就是 50px。而一列的宽度我们是知道的，因此 50/3.75 约等于 13.33 列，后面在设置盒子宽度时，就可以设置为 13.33 * 一列的宽度

设计稿宽度是：750
设备宽度是：375
像素比（DPR）:750/375=2
实际是：100/2=50px
一列是设备宽度分成100份=3.75
所以50px需要占50/3.75 约等于 13.33 列
```
iPhone5 320px
iPhone6 375px
现在设计师按照 750px 起稿，有一个元素，我们测量出来是 375px（物理像素）
换算成设备宽度就是 375/2 = 187.5
接下来计算列数：187.5/3.75 = 50
之后，我们只需要设置该元素的宽度为 50 * 一列宽度即可
在 iPhone5 中：50 * 3.2 = 160
在 iPhone6 中：50 * 3.75 = 187.5
```
而这个一列的宽度，实际上就是 rem。也就是说，rem 的适配方式，就是根据屏幕的宽度配合列数算出一列的宽度，之后设置 HTML 文档根元素的 font-size 就为此宽度即可。
```js
(function () {
    var html = document.documentElement; // HTML 根元素
    var width = html.clientWidth; // CSS 像素(设备宽度)
    html.style.fontSize = width / 16 + 'px'; // 把屏幕分成了 16 列
})();
```
这种方案虽然按照我们上面所讲的，将屏幕分为了 16 列，然后将根字体大小设置为了每一列的宽度。例如：

```html
<body>
    <!-- 假设测量出来为 375px，换算为设备宽度为 187.5px
    然后计算出占用多少列 187.5/23.4375 = 8 -->
    <div></div>
</body>
```
```js
(function () {
    var html = document.documentElement; // HTML 根元素
    var width = html.clientWidth; // CSS 像素(设备宽度)
    html.style.fontSize = width / 16 + 'px'; // 把屏幕分成了 16 列
    // 每一列的宽度为 23.4375
    // 因此设置根元素的字体大小为 23.4375px
})();
```