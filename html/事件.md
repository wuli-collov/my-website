# EventTarget

EventTarget 接口由可以接收事件、并且可以创建侦听器的对象实现。换句话说，任何事件目标都会实现与该接口有关的这三个方法。

Element 及其子项、document 和 window 是最常见的事件目标，但其他对象也可以是事件目标。比如 XMLHttpRequest、AudioNode 和 AudioContext 等等。

## dispatchEvent()

EventTarget 的 dispatchEvent() 方法会向一个指定的事件目标派发一个 Event，并以合适的顺序（同步地）调用所有受影响的 EventListener。标准事件处理规则（包括事件捕获和可选的冒泡过程）同样适用于通过手动使用 dispatchEvent() 方法派发的事件。

语法
dispatchEvent(event)

## event

```js
// 创建一个支持冒泡且不能被取消的 look 事件

var ev = new Event('look', { bubbles: true, cancelable: false });
document.dispatchEvent(ev);

// 事件可以在任何元素触发，不仅仅是 document
myDiv.dispatchEvent(ev);
```

## 构造函数

语法：
new EventTarget();

```js
class MyEventTarget extends EventTarget {
  constructor(mySecret) {
    super();
    this._secret = mySecret;
  }

  get secret() {
    return this._secret;
  }
}

let myEventTarget = new MyEventTarget(5);
let value = myEventTarget.secret; // === 5
myEventTarget.addEventListener('foo', (e) => {
  myEventTarget._secret = e.detail;
});

let event = new CustomEvent('foo', { detail: 7 });
myEventTarget.dispatchEvent(event);
let newValue = myEventTarget.secret; // === 7
```

# event

Event 接口表示在 EventTarget 上出现的事件。

## BeforeUnloadEvent

beforeunload 事件触发于 window、document 和它们的资源即将卸载时。

```
window.addEventListener("beforeunload", function (event) {
  event.returnValue = "\\o/";
});

//等同于
window.addEventListener("beforeunload", function (event) {
  event.preventDefault();
});

```

# 自定义事件

```js
// 创建自定义事件
const catFound = new CustomEvent('animalfound', {
  detail: {
    name: '猫',
  },
});
const dogFound = new CustomEvent('animalfound', {
  detail: {
    name: '狗',
  },
});

// 添加合适的事件监听器
obj.addEventListener('animalfound', (e) => console.log(e.detail.name));

// 触发事件
obj.dispatchEvent(catFound);
obj.dispatchEvent(dogFound);

// 控制台中输出“猫”和“狗”
```
